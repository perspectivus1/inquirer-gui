<html>

<head>
    <meta charset="utf-8">
    <title>inquirer-gui as a web component</title>
    <script src="../dist/inquirer-gui.js"></script>
    <style>
        :root {
            background-color: var(--sapBackgroundColor, #f7f7f7);
        }

        @font-face {
            font-family: "SAP-icons";
            src: url("./SAP-icons.woff") format("woff");
            font-weight: normal;
            font-style: normal;
        }
    </style>
    <script>
        applyTheme();
        window.addEventListener("hashchange", applyTheme, false);

        function removeTheme() {
            const themeLinks = document.querySelectorAll(".theme");
            for (themeLink of themeLinks) {
                themeLink.remove();
            }
        }

        function applyVscodeTheme(theme) {
            let link;
            removeTheme();
            link = document.createElement("link");
            link.setAttribute("class", "theme");
            link.setAttribute("rel", "stylesheet");
            link.setAttribute("type", "text/css");
            link.setAttribute("href", "vscode-theme.css");
            document.getElementsByTagName("head")[0].appendChild(link);

            link = document.createElement("link");
            link.setAttribute("class", "theme");
            link.setAttribute("rel", "stylesheet");
            link.setAttribute("type", "text/css");
            link.setAttribute("href", `${theme}-theme.css`);
            document.getElementsByTagName("head")[0].appendChild(link);
        }

        function applyTheme() {
            let link;
            switch (window.location.hash) {
                case "#dark":
                    removeTheme();
                    link = document.createElement("link");
                    link.setAttribute("class", "theme");
                    link.setAttribute("rel", "stylesheet");
                    link.setAttribute("type", "text/css");
                    link.setAttribute("href", "fundamental-dark-theme.css");
                    document.getElementsByTagName("head")[0].appendChild(link);
                    break;
                case "#vscode-dark":
                    applyVscodeTheme("vscode-dark");
                    break;
                case "#vscode-red":
                    applyVscodeTheme("vscode-red");
                    break;
                default:
                    removeTheme();
            }

        }
        function getQuestions() {
            return [
                {
                    name: "simpleInput",
                    message: "Simple input",
                    default: "Text",
                    validate: async function (answer, answers) {
                        console.log(answer);
                    }
                },
                {
                    name: "numberInput",
                    type: "number",
                    message: "A number",
                    default: "35",
                    validate: async function (answer, answers) {
                        console.log(answer);
                    }
                },
                {
                    name: "passwordInput",
                    type: "password",
                    message: "A password",
                    default: "abcd1234",
                    validate: async function (answer, answers) {
                        console.log(answer);
                    }
                },
                {
                    type: "checkbox",
                    name: "citizenship",
                    message: "Your citizenship",
                    choices: ["USA", { name: "Germany", value: "DE" }, "China", "Israel"],
                    default: ["DE", "USA"],
                },
                {
                    type: "expand",
                    name: "expand1",
                    message: "A list",
                    choices: ["USA", { name: "Germany", value: "DE" }, "China", "Israel"],
                    default: "DE",
                },
                {
                    type: "confirm",
                    name: "confirmation",
                    message: "Please confirm",
                    default: true,
                },
                {
                    name: "editor1",
                    type: "editor",
                    message: "Multi-line input",
                    default: "Text\n2nd line",
                    validate: async function (answer, answers) {
                        console.log(answer);
                    }
                },
                {
                    name: "fruit",
                    type: "list",
                    message: "Select a fruit",
                    choices: ["Banana", { name: "Apple", value: "APP" }, "Peach", "Pear"],
                    default: "APP",
                }
            ];

        }
    </script>
</head>

<body>
    <inquirer-gui></inquirer-gui>

    <script>
        const elements = document.getElementsByTagName("inquirer-gui");
        const inquirerGUIElement = elements[0];
        inquirerGUIElement.addEventListener("answered", (e) => {
            const answers = e.detail[0];
            // const issues = e.details[1];
            console.log("answers", answers);
        });
        inquirerGUIElement.questions = getQuestions();
    </script>
</body>

</html>